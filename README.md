# Тестовое задание для практикума SibmirSoft

## Взаимодействие с программой
Исполняемый скрипт - main.py, взаимодействие с которым происходит через параметры запуска. Существует 2 команды - `create_tables` и `add_new_url --url --source --name --extension`: 
* `add_new_url` используется для добавления с таблицу информации о новом источнике данных, расположенному по пути из параметра `--url`; `--source` используется для идентификации источника: на данный момент поддерживаются: 
  + Ссылки напрямую до файлов (get запрос к ним возвращает источник данных), для этого данный параметр можно не указывать.
  + Ссылки на файл в mail cloud (для этого указывать параметр `--source="mail"`);Параметр `--name` служит для указания названия создаваемой таблицы, а `--extension` - для указания на тип файла.
* `create_tables` используется для обработки (парсинг, определения типа столбцов по заполнению, выявление первичного ключа и т.д.) данных из таблицы source (читать об архитектуре) и последующего представления их в виде таблиц в базе данных.

На данный момент поддерживаются форматы: CSV, JSON (coming soon...). 

Типы данных PostgreSQL, корректно обрабатываемые программой: `BOOLEAN`, `INTEGER`, `BIGINT`, `DECIMAL`, `TIMESTAMP`, `VARCHAR`, `JSON` (coming soon...). Указание других в источнике данных может привести к непредвиденному поведению программы.

## Архитектура
Есть всего одна по умолчанию инициализируемая таблица в базе данных - source, которая в себе хранит всю информацию про конкретный источник данных, который указывается через `add_new_url`. Данные из этой таблицы используются для создания таблиц через `create_tables`.

Конфигурация для подключаемой базы данных задается или через переменные окружения (`DB_NAME`, `DB_HOST`, `DB_USER`, `DB_PASS`, `DB_PORT`) или в .env файле в корне программы (указывать там аналогичные параметры).

Поднятие локальной базы данных происходит через запуск docker-compose файла (`docker compose build`, `docker compose up`); внутри него находятся конфигурационные данные базы данных в `services / postgres / environment`.

## Некоторые подробности о работе приложения
Определение первичного ключа работает так: ищется первый столбец, в котором все значения уникальные и нет `NULL` значений. Если тип данных этого столбца - `INTEGER`, то при создании таблицы этому полю выставляется тип `SERIAL`, иначе заданный тип.
Определение типов полей происходит по указанным в них значениям.

## Демонстрация работы приложения
